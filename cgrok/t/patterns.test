#include <cxxtest/TestSuite.h>

#include <grokregex.hpp>
#include <grokmatch.hpp>

#include <sstream>
#include <fstream>
#include <string>

class GrokPatternsTest : public CxxTest::TestSuite {
  public:
    GrokPatternSet<sregex> default_patterns;
    GrokRegex<sregex> gre;
    GrokMatch<sregex> gm;
    GrokMatch<sregex>::match_map_type matchmap;

    void setUp() {
      default_patterns.LoadFromFile("../patterns");
      gre.AddPatternSet(default_patterns);
    }

    void testFoo() {
      string input = "1.234";
      bool success;
      gre.SetRegex("%NUMBER%");
      success = gre.Search(input, gm);
      TS_ASSERT(success);
      matchmap = gm.GetMatches();
      TS_ASSERT(matchmap["NUMBER"] == input);
    }
};
